<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Halloween Night ‚Äî –∫–æ–º–∞–Ω–¥–Ω—ã–π –∫–≤–µ—Å—Ç</title>
<style>
  :root{
    --bg:#0d0d0d;--panel:#121212;--paper:rgba(255,255,255,.06);
    --text:#f3e9d2;--accent:#d4a373;--muted:#b9b2a3;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Georgia,serif;overflow:hidden}
  #wrap{position:relative;width:100vw;height:100vh;background-size:cover;background-position:center;display:flex;flex-direction:column;justify-content:flex-end;box-sizing:border-box;padding:40px;transition:background-image 900ms ease}
  .card{background:rgba(0,0,0,.78);border:1px solid rgba(255,255,255,.08);backdrop-filter:saturate(120%) blur(2px);border-radius:14px;padding:22px;max-width:820px}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:14px}
  .btn{background:var(--accent);color:#1b1b1b;border:none;border-radius:10px;padding:12px 20px;font-size:1rem;cursor:pointer;transition:filter .2s,opacity .2s}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .btn:hover{filter:brightness(1.06)}
  .ghost{background:#76d0ff;color:#07131a}
  .hunters{background:#ff8d6a;color:#1a0c07}
  .badge{display:inline-block;padding:4px 10px;border:1px solid rgba(255,255,255,.16);border-radius:999px;font-size:.9rem;margin-right:8px;opacity:.9}
  .hint{color:var(--muted);font-size:.95rem}
  .fade{animation:fade .8s ease}
  @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
  .check{display:flex;align-items:center;gap:10px;background:var(--paper);border:1px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:10px}
  #teamTag{position:absolute;top:12px;left:12px;background:rgba(0,0,0,.5);padding:6px 10px;border-radius:8px}
  .title{font-size:1.4rem;margin:0 0 6px}
  .helper-card ul{margin:8px 0 0 18px}
  .helper-btn{background:#a2cfff;color:#07131a}
  .top-right{position:absolute;top:12px;right:12px;display:flex;gap:10px}
</style>
</head>
<body>

<div id="wrap">
  <div id="teamTag" style="display:none"></div>

  <div id="panel" class="card fade"></div>

  <div class="top-right">
    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ä–µ–±—ë–Ω–∫–∞ –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–º–æ–∂–Ω–æ –Ω–∞–∂–∞—Ç—å –Ω–∞ –¢–í) -->
    <button id="helperMode" class="btn helper-btn" title="–†–µ–∂–∏–º –ø–æ–º–æ—â–Ω–∏–∫–∞ (–±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞)">–Ø –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</button>
  </div>
</div>

<script>
/* ===== –º–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏–π ===== */
const $ = sel => document.querySelector(sel);
const wrap = $("#wrap");
const panel = $("#panel");
const teamTag = $("#teamTag");
const helperBtn = $("#helperMode");

const SCENES = [
  { bg: "intro.png", lock:false, html: `
      <h2 class="title">Halloween Night</h2>
      <div class="hint">–°–µ–π—á–∞—Å —Å–∏—Å—Ç–µ–º–∞ —Å–ª—É—á–∞–π–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—Å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –∏ –∫–≤–µ—Å—Ç –Ω–∞—á–Ω—ë—Ç—Å—è.</div>
      <div class="row" style="margin-top:18px">
        <button id="lucky" class="btn">–ú–Ω–µ –ø–æ–≤–µ–∑—ë—Ç</button>
      </div>
      <div class="hint" style="margin-top:8px">–ù–∞–∂–º–∏ ¬´–ú–Ω–µ –ø–æ–≤–µ–∑—ë—Ç¬ª ‚Äî –ø–æ–ª—É—á–∏—à—å –∫–æ–º–∞–Ω–¥—É –∏ —Å—Ä–∞–∑—É —É–≤–∏–¥–∏—à—å –ø–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ.</div>
  `},
  { bg: "library.png", lock:true, html: `
      <span class="badge">–ö–æ–º–Ω–∞—Ç–∞ 1 ‚Äî –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à—ë–ø–æ—Ç–æ–≤</span>
      <p><b>–ó–∞–¥–∞–Ω–∏–µ (–æ—Ñ–ª–∞–π–Ω):</b> –Ω–∞–π–¥–∏—Ç–µ <b>3 –ø—Ä–µ–¥–º–µ—Ç–∞</b>, –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω–∞ –±—É–∫–≤—ã <b>–¢ ‚Äî –´ ‚Äî –ö</b> (–≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ). 
      –°–ª–æ–∂–∏—Ç–µ –∏–∑ –Ω–∏—Ö —Å–ª–æ–≤–æ ¬´–¢–´–ö‚Ä¶¬ª –∏ –ø–æ–∫–∞–∂–∏—Ç–µ –≤–µ–¥—É—â–µ–º—É.</p>
  `},
  { bg: "alchemy.png", lock:true, html: `
      <span class="badge">–ö–æ–º–Ω–∞—Ç–∞ 2 ‚Äî –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è –∞–ª—Ö–∏–º–∏–∫–∞</span>
      <p><b>–ó–∞–¥–∞–Ω–∏–µ:</b> —Å–æ–±–µ—Ä–∏—Ç–µ ¬´–∑–µ–ª—å–µ –±–æ–¥—Ä–æ—Å—Ç–∏¬ª –∏–∑ <b>—Ç—Ä—ë—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤</b>: –æ—Ä–∞–Ω–∂–µ–≤–æ–≥–æ, —á—ë—Ä–Ω–æ–≥–æ –∏ —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–≥–æ. 
      –°–ª–æ–∂–∏—Ç–µ –∏—Ö –≤–º–µ—Å—Ç–µ –∏ —à—ë–ø–æ—Ç–æ–º –ø—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ <b>–∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –∏–∑ 10 —Å–ª–æ–≤</b>.</p>
  `},
  { bg: "mirrors.png", lock:true, html: `
      <span class="badge">–ö–æ–º–Ω–∞—Ç–∞ 3 ‚Äî –ó–µ—Ä–∫–∞–ª—å–Ω—ã–π –∑–∞–ª</span>
      <p><b>–ó–∞–¥–∞–Ω–∏–µ:</b> –∏—Å–ø–æ–ª–Ω–∏—Ç–µ <b>—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–∞–Ω–µ—Ü –ø—Ä–∏–∑—Ä–∞–∫–æ–≤</b> 15 —Å–µ–∫—É–Ω–¥ –∏ –∑–∞–º—Ä–∏—Ç–µ –≤ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –ø–æ–∑–µ. 
      –°–Ω–∏–º–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ –¥–ª—è –≤–µ–¥—É—â–µ–≥–æ.</p>
  `},
  { bg: "library.png", lock:true, html: `
      <span class="badge">–ö–æ—Ä–∏–¥–æ—Ä —à—ë–ø–æ—Ç–æ–≤</span>
      <p><b>–ó–∞–¥–∞–Ω–∏–µ:</b> –≤—Å—Ç–∞–Ω—å—Ç–µ –≤ –∫—Ä—É–≥. –ü–µ—Ä–≤—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–∏–¥—É–º—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞—à–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑ <b>1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</b> –∏ —à—ë–ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–æ—Å–µ–¥—É. 
      –ö–∞–∂–¥—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ <b>–æ–¥–Ω–æ–º—É —Å–ª–æ–≤—É</b>. –ö–æ–≥–¥–∞ –∏—Å—Ç–æ—Ä–∏—è –≤–µ—Ä–Ω—ë—Ç—Å—è ‚Äî –ø—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ –µ—ë –≤—Å–ª—É—Ö. –ó–∞–ø–æ–º–Ω–∏—Ç–µ <b>–ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ</b>.</p>
  `},
  { bg: "door.png", lock:true, html: `
      <span class="badge">–§–∏–Ω–∞–ª—å–Ω–∞—è –¥–≤–µ—Ä—å</span>
      <p><b>–ó–∞–¥–∞–Ω–∏–µ:</b> –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–¥–∞–π—Ç–µ <b>—Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –∑–≤—É–∫–∞</b> (–≤–µ—Ç–µ—Ä, —Å–∫—Ä–∏–ø, —à–∞–≥–∏), –∑–∞—Ç–µ–º –≥—Ä–æ–º–∫–æ –ø—Ä–æ–∏–∑–Ω–µ—Å–∏—Ç–µ <b>–ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏</b>. 
      –ï—Å–ª–∏ –ø—Ä–æ–∑–≤—É—á–∏—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ ‚Äî –∑–∞–º–æ–∫ —â—ë–ª–∫–Ω–µ—Ç.</p>
  `},
  { bg: "door.png", lock:false, html: `
      <h3 class="title">–°–≤–æ–±–æ–¥–∞! üîì</h3>
      <p>–í—ã –≤—ã–±—Ä–∞–ª–∏—Å—å –∏–∑ –¥–æ–º–∞ —Å –ø—Ä–∏–≤–∏–¥–µ–Ω–∏—è–º–∏. –í–∞—à–∞ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî –æ–≥–æ–Ω—å. –°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –•—ç–ª–ª–æ—É–∏–Ω–∞! üéÉ</p>
  `}
];

const TEAM_NAMES = ["–ü—Ä–∏–∑—Ä–∞–∫–∏","–û—Ö–æ—Ç–Ω–∏–∫–∏"];
const TEAM_BADGE_COLOR = {
  "–ü—Ä–∏–∑—Ä–∞–∫–∏": "ghost",
  "–û—Ö–æ—Ç–Ω–∏–∫–∏": "hunters"
};

let sceneIndex = 0;
let myTeam = localStorage.getItem("hn_team") || null;

/* ===== –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ ===== */
function setBG(img){ wrap.style.backgroundImage = `url(${img})`; }

function renderIntro(){
  setBG(SCENES[0].bg);
  panel.innerHTML = SCENES[0].html;
  panel.classList.add("fade"); setTimeout(()=>panel.classList.remove("fade"),800);

  $("#lucky").onclick = () => {
    // —Å–ª—É—á–∞–π–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
    const pick = TEAM_NAMES[Math.floor(Math.random()*TEAM_NAMES.length)];
    myTeam = pick;
    localStorage.setItem("hn_team", pick);
    showTeamToast();
    // —Å—Ç–∞—Ä—Ç –∫–≤–µ—Å—Ç–∞
    sceneIndex = 1;
    renderScene();
  };
}

function showTeamToast(){
  teamTag.style.display = "block";
  teamTag.textContent = `–¢–≤–æ—è –∫–æ–º–∞–Ω–¥–∞: ${myTeam}`;
  const cls = TEAM_BADGE_COLOR[myTeam] || "";
  teamTag.className = ""; teamTag.id="teamTag"; // —Å–±—Ä–æ—Å –∫–ª–∞—Å—Å–æ–≤
  if(cls) teamTag.classList.add(cls);
}

function renderScene(){
  const s = SCENES[sceneIndex];
  setBG(s.bg);

  let controls = "";
  if(s.lock){
    controls = `
      <div class="row">
        <label class="check"><input type="checkbox" id="ok"> <span>–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (—á–µ—Å—Ç–Ω–∞—è –∏–≥—Ä–∞!)</span></label>
        <button class="btn" id="next" disabled>–î–∞–ª—å—à–µ</button>
      </div>`;
  }else{
    controls = `<div class="row"><button class="btn" id="next">${sceneIndex < SCENES.length-1 ? "–î–∞–ª—å—à–µ" : "–§–∏–Ω–∏—à"}</button></div>`;
  }

  panel.innerHTML = `<div class="fade">${s.html}${controls}</div>`;

  if(s.lock){
    const ok = $("#ok"), next=$("#next");
    ok.onchange = ()=> next.disabled = !ok.checked;
    next.onclick = ()=>{ sceneIndex++; if(sceneIndex<SCENES.length){ renderScene(); } else { endFlow(); } };
  }else{
    $("#next").onclick = ()=>{ sceneIndex++; if(sceneIndex<SCENES.length){ renderScene(); } else { endFlow(); } };
  }
}

function endFlow(){
  // —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω —É–∂–µ –æ—Ç—Ä–∏—Å—É–µ—Ç—Å—è –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ü–µ–Ω—ã
  // –º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –Ω–æ–≤—ã–π –∑–∞—Ö–æ–¥:
  // localStorage.removeItem("hn_team");
}

/* ===== —Ä–µ–∂–∏–º –ø–æ–º–æ—â–Ω–∏–∫–∞ (–¥–ª—è –∏–≥—Ä–æ–∫–∞ –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞) ===== */
function renderHelper(){
  setBG("intro.png");
  teamTag.style.display = "none";
  panel.innerHTML = `
    <div class="helper-card fade">
      <h2 class="title">–†–µ–∂–∏–º –ø–æ–º–æ—â–Ω–∏–∫–∞ (–±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞)</h2>
      <p class="hint">–≠—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ‚Äî –ø–æ–∫–∞–∂–∏—Ç–µ –µ—ë –Ω–∞ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–µ.</p>
      <p><b>–¢–≤–æ—è —Ä–æ–ª—å ‚Äî –ü—Ä–æ–≤–æ–¥–Ω–∏–∫:</b> –ø–æ–º–æ–≥–∞–µ—à—å –æ–±–µ–∏–º –∫–æ–º–∞–Ω–¥–∞–º, —Å–ª–µ–¥–∏—à—å –∑–∞ —á–µ—Å—Ç–Ω–æ–π –∏–≥—Ä–æ–π,
      –æ–±—ä—è–≤–ª—è–µ—à—å —Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø —Ä–∞—É–Ω–¥–∞, –¥–µ—Ä–∂–∏—à—å ¬´–º–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω–∞—Ä—å¬ª (–ª—é–±–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ª–∞–º–ø–∞/—Å–≤–µ—á–∞-–±—É—Ç–∞—Ñ–æ—Ä–∏—è) –∏ –≤—ã–¥–∞—ë—à—å –ø–æ–¥—Å–∫–∞–∑–∫—É, –µ—Å–ª–∏ –≤–µ–¥—É—â–∏–π —Ä–∞–∑—Ä–µ—à–∏—Ç.</p>
      <p><b>–ü–æ —Ä–∞—É–Ω–¥–∞–º:</b></p>
      <ul>
        <li><b>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:</b> –ø—Ä–æ–≤–µ—Ä—è–π, —á—Ç–æ–±—ã –ø—Ä–µ–¥–º–µ—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—á–∏–Ω–∞–ª–∏—Å—å –Ω–∞ –Ω—É–∂–Ω—ã–µ –±—É–∫–≤—ã. –†–∞–∑—Ä–µ—à–∞–π –æ–¥–Ω—É –∑–∞–º–µ–Ω—É.</li>
        <li><b>–ê–ª—Ö–∏–º–∏–∫:</b> —Å–º–æ—Ç—Ä–∏, —á—Ç–æ–±—ã —Ü–≤–µ—Ç–∞ –±—ã–ª–∏ —Ä–∞–∑–Ω—ã–µ. –ü—Ä–∏–¥—É–º–∞–π —Å–º–µ—à–Ω–æ–µ ¬´–∑–≤—É–∫–æ–≤–æ–µ –±—É—Ä–ª–µ–Ω–∏–µ¬ª –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã.</li>
        <li><b>–ó–µ—Ä–∫–∞–ª—å–Ω—ã–π –∑–∞–ª:</b> —Å—á–∏—Ç–∞–π 15 —Å–µ–∫—É–Ω–¥ –∏ –∫—Ä–∏—á–∏ ¬´–∑–∞–º—ë—Ä–∑–ª–∏!¬ª</li>
        <li><b>–ö–æ—Ä–∏–¥–æ—Ä:</b> —Å–ª–µ–¥–∏, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –¥–æ–±–∞–≤–ª—è–ª —Ä–æ–≤–Ω–æ –ø–æ –æ–¥–Ω–æ–º—É —Å–ª–æ–≤—É.</li>
        <li><b>–î–≤–µ—Ä—å:</b> –¥–∞–π –∫–æ–º–∞–Ω–¥—É ¬´—Ç—Ä–∏-–¥–≤–∞-—Ä–∞–∑!¬ª –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏.</li>
      </ul>
      <div class="row" style="margin-top:14px">
        <button class="btn" id="back">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∏–≥—Ä—É</button>
      </div>
    </div>
  `;
  $("#back").onclick = ()=> { panel.classList.add("fade"); renderIntro(); };
}

/* ===== —Å—Ç–∞—Ä—Ç ===== */
helperBtn.onclick = renderHelper;
if(myTeam){
  showTeamToast();
  sceneIndex = 1;
  renderScene();
} else {
  renderIntro();
}
</script>
</body>
</html>
