<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0d0f14; --panel:#151823; --accent:#ffb703; --ok:#66e3ff; --hun:#ffd166; --muted:#aeb4c2;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:'Montserrat',sans-serif; color:#fff;
  background:
    radial-gradient(1200px 600px at 50% -10%, #1d2130 0%, transparent 60%),
    radial-gradient(600px 400px at 10% 90%, #171a25 0%, transparent 60%),
    #0b0d12;
  min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
}
.container{width:100%; max-width:720px; text-align:center}
h1{margin:0 0 8px; font-weight:900; font-size:clamp(24px,5vw,40px)}
.lead{color:var(--muted); margin:0 0 18px}
.panel{
  background:linear-gradient(180deg,#171a24 0%,#12141c 100%);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px; padding:24px;
  box-shadow:0 10px 40px rgba(0,0,0,.35);
}

/* –°–∫–∞–Ω–µ—Ä */
.scan-wrap{position:relative; width:min(80vw,420px); height:min(80vw,420px); margin:10px auto 18px}
.scan-circle{
  position:absolute; inset:0; border-radius:50%;
  background: radial-gradient(60% 60% at 50% 40%, #22283a 0%, #151a28 55%, #0f1320 100%);
  box-shadow: inset 0 0 50px rgba(0,0,0,.6), 0 0 60px rgba(0,0,0,.35);
  display:flex; align-items:center; justify-content:center; overflow:hidden; cursor:pointer;
  border:1px solid rgba(255,255,255,.05);
}
.scan-circle:hover{outline:2px solid rgba(255,183,3,.25); outline-offset:3px}

/* –†—É–∫–∏/—Å–∫–∞–Ω-–ª–∏–Ω–∏–∏ –∏ –ø—É–ª—å—Å */
.pulse::before{
  content:""; position:absolute; inset:12%; border-radius:50%;
  border:2px solid rgba(255,255,255,.08); animation:pulse 2.2s ease-out infinite;
}
.pulse::after{
  content:""; position:absolute; left:0; right:0; height:3px; top:-3px;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
  animation:scanline 2.4s linear infinite;
  opacity:.4;
}
@keyframes pulse{0%{transform:scale(.9); opacity:.7} 70%{transform:scale(1.05); opacity:.15} 100%{opacity:0}}
@keyframes scanline{0%{top:-3px} 100%{top:calc(100% + 3px)}}

.hand{
  width:90px; height:90px; border-radius:50%;
  background: radial-gradient(circle at 35% 35%, #ffd166, #ff9e00);
  box-shadow:0 0 18px rgba(255,158,0,.45);
  position:relative; transform:translateY(6px);
}
.hand:after{
  content:"üëá"; font-size:38px; position:absolute; inset:0; display:grid; place-items:center;
  filter:drop-shadow(0 2px 2px rgba(0,0,0,.4));
}

/* –í—Ä–∞—â–∞—é—â–∏–π—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ */
.spinner{
  position:absolute; width:92%; height:92%; border-radius:50%; inset:4%;
  border:3px dashed rgba(255,255,255,.18);
  animation:spin 1.5s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* –†–µ–∑—É–ª—å—Ç–∞—Ç */
.result{margin:6px 0 14px; font-size:clamp(18px,3.8vw,26px); font-weight:900; display:none}
.result.ghost{color:var(--ok); text-shadow:0 0 12px rgba(102,227,255,.35)}
.result.hunter{color:var(--hun); text-shadow:0 0 12px rgba(255,209,102,.35)}
.hint{color:var(--muted); font-size:14px; margin-top:8px}

/* –ö–Ω–æ–ø–∫–∏ */
.actions{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:12px}
.btn{
  padding:14px 18px; border:none; border-radius:12px; cursor:pointer; font-weight:800;
  background:#2a2f42; color:#fff; transition:.25s;
}
.btn:disabled{opacity:.6; cursor:not-allowed}
.btn-primary{background:var(--accent); color:#000; box-shadow:0 6px 16px rgba(255,183,3,.25)}
.btn:hover{transform:translateY(-2px)}

/* –º–∏–Ω–∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ */
.note{color:#8d94a6; font-size:12px; margin-top:6px}
</style>
</head>
<body>
  <div class="container">
    <h1>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º</h1>
    <p class="lead">–î–æ–º —á—É–≤—Å—Ç–≤—É–µ—Ç –≤–∞—à—É —ç–Ω–µ—Ä–≥–∏—é‚Ä¶ –ü—Ä–∏–ª–æ–∂–∏—Ç–µ —Ä—É–∫—É –∫ –∫—Ä—É–≥—É ‚Äî –æ–Ω —Ä–µ—à–∏—Ç, –∫—Ç–æ –≤—ã: <b>–ü—Ä–∏–∑—Ä–∞–∫</b> –∏–ª–∏ <b>–û—Ö–æ—Ç–Ω–∏–∫</b>.</p>

    <div class="panel">
      <div class="scan-wrap">
        <div id="circle" class="scan-circle pulse" aria-label="–ö–æ—Å–Ω–∏—Ç–µ—Å—å –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è">
          <div class="hand" id="hand"></div>
          <div class="spinner" id="spinner" style="display:none"></div>
        </div>
      </div>

      <div id="result" class="result"></div>

      <div class="actions">
        <button class="btn" id="again" style="display:none">–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –µ—â—ë —Ä–∞–∑</button>
        <a id="goBtn" class="btn btn-primary" href="#" style="display:none">–í –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –¥–æ–º</a>
      </div>
      <div class="note">–ö–æ–º–∞–Ω–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –¥–æ–º–µ.</div>
    </div>
  </div>

<script>
/* –ò–º–∏—Ç–∞—Ü–∏—è ¬´—á–µ—Å—Ç–Ω–æ–≥–æ¬ª –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ –≠–¢–û–ú —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
   (–º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ).
   –°–ª–µ–≥–∫–∞ —Å–º–µ—â–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤ –ø–æ–ª—å–∑—É –º–µ–Ω—å—à–∏–Ω—Å—Ç–≤–∞
   –≤ localStorage –Ω–∞ –¥–∞–Ω–Ω–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ. */
const LS_KEY_TEAM='hn_team';
const LS_KEY_COUNTS='hn_counts'; // {ghosts: n, hunters: n}
const circle = document.getElementById('circle');
const spinner= document.getElementById('spinner');
const hand   = document.getElementById('hand');
const result = document.getElementById('result');
const goBtn  = document.getElementById('goBtn');
const again  = document.getElementById('again');

/* –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ */
const getCounts=()=> {
  try { return JSON.parse(localStorage.getItem(LS_KEY_COUNTS)) || {ghosts:0, hunters:0}; }
  catch { return {ghosts:0, hunters:0}; }
};
const setCounts=(c)=> localStorage.setItem(LS_KEY_COUNTS, JSON.stringify(c));

function weightedRandomTeam(){
  const c = getCounts();
  // –±–∞–∑–æ–≤–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å 50/50; –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–æ—Å >1, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∞–Ω—Å ¬´–º–µ–Ω—å—à–∏–Ω—Å—Ç–≤–∞¬ª
  let pGhost = 0.5;
  if (c.ghosts > c.hunters) pGhost = 0.33;
  if (c.hunters > c.ghosts) pGhost = 0.67;
  return (Math.random() < pGhost) ? 'ghosts' : 'hunters';
}

function label(team){
  return team==='ghosts' ? '–ü–†–ò–ó–†–ê–ö–ê–ú' : '–û–•–û–¢–ù–ò–ö–ê–ú';
}
function classFor(team){
  return team==='ghosts' ? 'ghost' : 'hunter';
}

function lockUI(lock){
  circle.style.pointerEvents = lock ? 'none':'auto';
}

function startScan(){
  result.style.display='none';
  goBtn.style.display='none';
  again.style.display='none';
  hand.style.display='none';
  spinner.style.display='block';
  lockUI(true);

  // –∏–º–∏—Ç–∞—Ü–∏—è ¬´—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è¬ª: 2‚Äì3 —Å–µ–∫—É–Ω–¥—ã —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º —Ñ–ª–∏–∫–æ–º
  const dur = 1800 + Math.random()*1200;
  setTimeout(()=>{
    const team = weightedRandomTeam();

    // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±–æ—Ä
    localStorage.setItem(LS_KEY_TEAM, team);
    const counts = getCounts();
    (team==='ghosts') ? counts.ghosts++ : counts.hunters++;
    setCounts(counts);

    // –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    spinner.style.display='none';
    result.className='result '+classFor(team);
    result.innerHTML = (team==='ghosts'
      ? 'üëª –í–∞—à–∞ —ç–Ω–µ—Ä–≥–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ü–†–ò–ó–†–ê–ö–ê–ú!'
      : 'üèπ –í–∞—Å –≤—ã–±—Ä–∞–ª–∏ –û–•–û–¢–ù–ò–ö–ò!');
    result.style.display='block';

    // –∫–Ω–æ–ø–∫–∏
    again.style.display='inline-block';
    goBtn.href = `host.html?team=${team}`;
    goBtn.style.display='inline-block';

    lockUI(false);
  }, dur);
}

circle.addEventListener('click', startScan);
again.addEventListener('click', startScan);

// –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ —É–∂–µ –±—ã–ª–∞ –≤—ã–±—Ä–∞–Ω–∞ —Ä–∞–Ω–µ–µ ‚Äî –ø–æ–∫–∞–∂–µ–º —Å—Ä–∞–∑—É –∏ –¥–∞–¥–∏–º –∫–Ω–æ–ø–∫—É
(function init(){
  const team = localStorage.getItem(LS_KEY_TEAM);
  if(team){
    hand.style.display='none';
    result.className='result '+classFor(team);
    result.textContent = (team==='ghosts'
      ? 'üëª –í–∞—à–∞ —ç–Ω–µ—Ä–≥–∏—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ü–†–ò–ó–†–ê–ö–ê–ú!'
      : 'üèπ –í–∞—Å –≤—ã–±—Ä–∞–ª–∏ –û–•–û–¢–ù–ò–ö–ò!');
    result.style.display='block';
    goBtn.href=`host.html?team=${team}`;
    goBtn.style.display='inline-block';
    again.style.display='inline-block';
  }
})();
</script>
</body>
</html>
