<!doctype html>
<html lang="ru">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üéÉ Halloween Bingo</title>
<style>
  :root{--bg:#111;--card:#1a1a24;--stroke:#444;--accent:#FFBA08;--hit:#CF2C02}
  *{box-sizing:border-box}
  body{font-family:system-ui,Arial;background:var(--bg);color:#fff;display:grid;place-items:center;min-height:100dvh;margin:0}
  .wrap{max-width:900px;width:92vw;padding:16px}
  header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}
  h1{margin:8px 0 16px;text-align:left}
  .lang{display:flex;gap:8px}
  .lang button{padding:8px 12px;border-radius:10px;border:1px solid #2d2d39;background:#222;color:#fff;font-weight:800;cursor:pointer}
  .lang button.active{background:var(--accent);color:#000;border-color:transparent}
  .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
  .cell{aspect-ratio:1/1;border:1px solid var(--stroke);border-radius:10px;display:grid;place-items:center;text-align:center;padding:8px;background:var(--card);cursor:pointer}
  .cell.on{background:var(--hit);color:#000;font-weight:800;box-shadow:0 0 0 3px var(--accent) inset}
  small{opacity:.75}
  .btns{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}
  button.action{padding:10px 14px;border:0;border-radius:10px;background:var(--accent);color:#000;font-weight:800;cursor:pointer}
  button.secondary{background:#2a2a33;color:#fff}
  .note{margin-top:10px}
</style>

<div class="wrap">
  <header>
    <h1 id="h-title">üëª Halloween Bingo</h1>
    <div class="lang">
      <button id="btn-ru" class="active">–†—É—Å</button>
      <button id="btn-es">Esp</button>
    </div>
  </header>

  <div class="btns">
    <button id="new" class="action"></button>
    <button id="clear" class="action secondary"></button>
  </div>

  <div class="grid" id="grid"></div>

  <p class="note"><small id="rule"></small></p>
</div>

<script>
/* ---------- i18n —Å–ª–æ–≤–∞—Ä–∏ ---------- */
const I18N = {
  ru: {
    title: "üëª Halloween Bingo",
    newCard: "–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞",
    clear: "–°–Ω—è—Ç—å –æ—Ç–º–µ—Ç–∫–∏",
    rule: "–ü—Ä–∞–≤–∏–ª–æ: –æ—Ç–º–µ—á–∞–π –∫–ª–µ—Ç–∫—É, –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏. –õ–∏–Ω–∏—è (5 –ø–æ–¥—Ä—è–¥) ‚Äî –∫—Ä–∏–∫–Ω–∏ ¬´–ë–£!¬ª –∏ –ø–æ–∫–∞–∂–∏ —ç–∫—Ä–∞–Ω –≤–µ–¥—É—â–µ–º—É.",
    win: "üéâ –ë–ò–ù–ì–û! –ü–æ–∑–æ–≤–∏ –≤–µ–¥—É—â–µ–≥–æ –∑–∞ –ø—Ä–∏–∑!",
    items: [
      "–ö—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞–ª ¬´–ë—É!¬ª","–°—Ç—Ä–∞—à–Ω—ã–π –∑–≤—É–∫","–ú–∏–≥–∞–Ω–∏–µ —Å–≤–µ—Ç–∞","–§–æ—Ç–∫–∞ —Å —Ç—ã–∫–≤–æ–π",
      "–ü–∞—É—Ç–∏–Ω–∞/–ø–∞—É–∫ –≤ –¥–µ–∫–æ—Ä–µ","–¢–∞–Ω–µ—Ü –≤–µ–¥—å–º—ã","–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Å–µ–ª—Ñ–∏","–ò—Å—Ç–æ—Ä–∏—è —É–∂–∞—Å–æ–≤",
      "–†–æ–∑—ã–≥—Ä—ã—à –∫–æ–≥–æ-—Ç–æ","–£–ø–∞–ª —Ä–µ–∫–≤–∏–∑–∏—Ç","–ì—Ä–æ–º–∫–∏–π —Å–∫—Ä–∏–º","–ö—Ç–æ-—Ç–æ –≤ –º–∞—Å–∫–µ",
      "–ß—ë—Ä–Ω–∞—è –∫–æ—à–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ","–ö–æ–Ω—Ñ–µ—Ç—Ç–∏-–º–µ—Ç–µ–ª—å","–®—ë–ø–æ—Ç –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è",
      "–ö—Ç–æ-—Ç–æ –ø—Ä–æ–ª–∏–ª –Ω–∞–ø–∏—Ç–æ–∫","–ù–∞—Ä–∏—Å–æ–≤–∞–Ω–Ω—ã–π —à—Ä–∞–º","–§—Ä–∞–∑–∞ ¬´—Ç–æ–ª—å–∫–æ –Ω–µ —Å—Ç—Ä–∞—à–Ω–æ¬ª",
      "–ü—Ä–∏–∑—Ä–∞–∫ –≤ —Å—Ç–æ—Ä–∏—Å","–°–º–µ—à–Ω–æ–π –∫–æ—Å—Ç—é–º","–î–µ—Ç—Å–∫–∏–π —Å–º–µ—Ö","–ë—Ä–∞—Å–ª–µ—Ç ¬´–∏–∑ –∫–æ—Å—Ç–µ–π¬ª",
      "–¢—ã–∫–≤–µ–Ω–Ω—ã–π —Å–º–∞–π–ª –≤ —á–∞—Ç–µ","–§–ª–µ—à–º–æ–± —Ç–∞–Ω—Ü–∞","–ö—Ç–æ-—Ç–æ –∑–µ–≤–Ω—É–ª"
    ]
  },
  es: {
    title: "üëª Bingo de Halloween",
    newCard: "Nueva tarjeta",
    clear: "Borrar marcas",
    rule: "Regla: marca una casilla cuando ocurra el evento en la vida real. ¬°Cinco en l√≠nea! ‚Äî grita ¬´¬°BU!¬ª y ense√±a la pantalla al anfitri√≥n.",
    win: "üéâ ¬°BINGO! ¬°Llama al anfitri√≥n para recoger tu premio!",
    items: [
      "Alguien dijo ¬´¬°Buh!¬ª","Sonido aterrador","Luz parpadeante","Foto con calabaza",
      "Telara√±a o ara√±a en la deco","Baile de bruja","Selfie en grupo","Historia de miedo",
      "Broma o susto a alguien","Cae un decorado","Grito fuerte","Alguien con m√°scara",
      "Gato negro en una imagen","Tormenta de confeti","Susurro de hechizo",
      "Alguien derram√≥ bebida","Cicatriz pintada","Frase ¬´que no d√© miedo¬ª",
      "Fantasma en las stories","Disfraz gracioso","Risa de ni√±o","Pulsera de huesos",
      "Emoji de calabaza en chat","Baile grupal/flashmob","Alguien bosteza"
    ]
  }
};

/* ---------- helpers ---------- */
const $ = s => document.querySelector(s);
const grid = $('#grid');
const LS_LANG = 'bingo_lang';
const keyState = lang => `bingoState_${lang}`;
const keyItems = lang => `bingoItems_${lang}`;

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

/* ---------- —Å–æ—Å—Ç–æ—è–Ω–∏–µ ---------- */
let lang = (localStorage.getItem(LS_LANG) || (navigator.language||'ru').startsWith('es')?'es':'ru');
if(!['ru','es'].includes(lang)) lang='ru';
applyLang(lang);

/* ---------- UI / —è–∑—ã–∫ ---------- */
function applyLang(l){
  lang = l;
  localStorage.setItem(LS_LANG, lang);
  document.documentElement.lang = lang;
  const t = I18N[lang];

  $('#h-title').textContent = t.title;
  $('#new').textContent = t.newCard;
  $('#clear').textContent = t.clear;
  $('#rule').textContent = t.rule;

  $('#btn-ru').classList.toggle('active', lang==='ru');
  $('#btn-es').classList.toggle('active', lang==='es');

  // –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∏–ª–∏ —Å–æ–±—Ä–∞—Ç—å –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É
  const savedItems = JSON.parse(localStorage.getItem(keyItems(lang))||'null');
  const savedState = JSON.parse(localStorage.getItem(keyState(lang))||'{}');
  if(savedItems) render(savedItems, savedState);
  else build();
}

$('#btn-ru').onclick = ()=>applyLang('ru');
$('#btn-es').onclick = ()=>applyLang('es');

/* ---------- —Å–±–æ—Ä–∫–∞/—Ä–µ–Ω–¥–µ—Ä ---------- */
function build(){
  const pool = I18N[lang].items.slice();
  const arr = shuffle(pool).slice(0,25);
  localStorage.setItem(keyItems(lang), JSON.stringify(arr));
  render(arr, {});
}
function render(arr, on={}){
  grid.innerHTML = '';
  arr.forEach((text,i)=>{
    const d = document.createElement('div');
    d.className = 'cell' + (on[i] ? ' on' : '');
    d.textContent = text;
    d.onclick = ()=>{
      on[i] = !on[i];
      localStorage.setItem(keyState(lang), JSON.stringify(on));
      render(arr, on);
      checkWin(on);
    };
    grid.appendChild(d);
  });
}
function checkWin(on){
  const lines=[];
  for(let r=0;r<5;r++){lines.push([0,1,2,3,4].map(c=>r*5+c))}
  for(let c=0;c<5;c++){lines.push([0,1,2,3,4].map(r=>r*5+c))}
  lines.push([0,6,12,18,24],[4,8,12,16,20]);
  if(lines.some(L=>L.every(i=>on[i]))){
    alert(I18N[lang].win);
  }
}

/* ---------- –∫–Ω–æ–ø–∫–∏ ---------- */
$('#new').onclick = build;
$('#clear').onclick = ()=>{
  localStorage.removeItem(keyState(lang));
  render(JSON.parse(localStorage.getItem(keyItems(lang))), {});
};
</script>
</html>
